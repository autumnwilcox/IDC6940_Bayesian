# Bayesian Logistic Regression for Diabetes Risk (NHANES 2013–2014)

## Overview

This project models doctor-diagnosed diabetes in **NHANES 2013–2014 adults (≥20 years)** using:

-   **Survey-weighted logistic regression (MLE)** using NHANES strata, PSU, and exam weights
-   **Bayesian logistic regression** (`brms`) with weakly informative priors

Predictors include standardized **age** and **BMI**, **sex**, and **race/ethnicity**.\
We compare estimates across frameworks and report diagnostics such as convergence metrics, posterior predictive checks, and prevalence differences between design-based and model-based inference.

------------------------------------------------------------------------

## Methods

-   **Survey-weighted MLE:**\
    `svyglm()` with NHANES design variables (`WTMEC2YR`, `SDMVPSU`, `SDMVSTRA`).

-   **Bayesian logistic regression:**\
    Fit with `brms::brm()` using:

    -   Coefficients: `Normal(0, 2.5)`
    -   Intercept: `Student_t(3, 0, 10)` *(R. V. D. Schoot et al., 2013)*
    -   4 chains × 2000 iterations
    -   `adapt_delta = 0.95`
    -   Normalized exam weights used as importance weights

> **Note:** Firth penalized logistic regression was explored earlier but removed from the final report for consistency with the Quarto workflow.

------------------------------------------------------------------------

## Model Equation

$$
\operatorname{logit}\{\Pr(Y=1)\}
= \beta_0 + \beta_1\,\mathrm{BMI}_c + \beta_2\,\mathrm{Age}_c
+ \beta_3\,\mathrm{Sex} + \sum_g \beta_{3+g}\,\mathrm{Race}_g
$$

Age and BMI are standardized (z-scores). Reference categories are **Male** and **Non-Hispanic White**.

------------------------------------------------------------------------

## Results Summary

The report includes:

-   Odds ratios (per 1 SD) for Age and BMI
-   Comparison of survey-weighted vs Bayesian effect estimates
-   Posterior summaries and convergence diagnostics
-   Bayesian (R\^2)
-   Posterior predictive checks
-   Prevalence comparison between survey-weighted and Bayesian models

------------------------------------------------------------------------

## Repository Structure

``` bash
.
├── index.qmd # Full project report (source)
├── docs/ # Rendered report output (HTML/PDF)
├── slides.qmd # Presentation slides (reveal.js)
├── references.bib # Bibliography for report and slides
├── styles.css # Custom styling for report
├── slides.css # Custom styling for slides
├── R/
│ └── data_prep.R # NHANES preprocessing pipeline
├── data/ # Processed NHANES data files (.rds)
├── figs/ # Figures generated by the analysis
└── images/ # Images used in the report/slides
```

## Reproducibility

To reproduce this project locally:

``` bash
git clone https://github.com/<username>/<repo-name>.git
cd <repo-name>
```

```{r}
# 2. Install required R packages
install.packages(c(
  "tidyverse", "survey", "mice", "brms", "viridis",
  "knitr", "bayesplot"
))

# 3. Preprocess NHANES data
source("R/data_prep.R")
```

``` bash
# 4. Render the report and slides
quarto render index.qmd
quarto render slides.qmd
```

------------------------------------------------------------------------

## Authors

-   Namita Mishra
-   Autumn Wilcox
-   **Advisor:** Dr. Ashraf Cohen
